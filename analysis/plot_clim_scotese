#!/bin/bash

plot_tempdiff=0
plot_streamabs=1
plot_uv=0
plot_mixed=1

###  get args
if [ "$#" -ne 3 ]; then
    echo "Illegal number of options: must be 3"
    exit
fi

###  setup
exp=${1}
exr=${2}
doplot=${3}


if [ ${plot_tempdiff} -eq 1 ] ; then
jobfile="ncl.${exp}.clim_dif.ncl"
\cp ncl.SKEL.clim_dif.ncl ${jobfile}
sed -i "s/EXP/${exp}/g" ${jobfile}
sed -i "s/EXR/${exr}/g" ${jobfile}
sed -i "s/DOPLOT/${doplot}/g" ${jobfile}
ncl ${jobfile}
\rm ${jobfile}
fi


if [ ${plot_streamabs} -eq 1 ] ; then
jobfile="ncl.${exp}.clim_abs.ncl"
\cp ncl.SKEL.clim_abs.ncl ${jobfile}
sed -i "s/EXP/${exp}/g" ${jobfile}
sed -i "s/EXR/${exr}/g" ${jobfile}
sed -i "s/TYP/pf/g" ${jobfile}
sed -i "s/COL/BlueDarkRed18/g" ${jobfile}
sed -i "s/MAX/1.5e14/g" ${jobfile}
sed -i "s/MIN/-1.5e14/g" ${jobfile}
sed -i "s/DEL/1e13/g" ${jobfile}
sed -i "s/VAR/streamFn_mm_uo/g" ${jobfile}
sed -i "s/VSHORT/streamfn/g" ${jobfile}
sed -i "s/VLONG/Streamfunction/g" ${jobfile}
sed -i "s/DOPLOT/${doplot}/g" ${jobfile}
ncl ${jobfile}
\rm ${jobfile}
fi


if [ ${plot_mixed} -eq 1 ] ; then
jobfile="ncl.${exp}.clim_abs.ncl"
\cp ncl.SKEL.clim_abs.ncl ${jobfile}
sed -i "s/EXP/${exp}/g" ${jobfile}
sed -i "s/EXR/${exr}/g" ${jobfile}
sed -i "s/TYP/pf/g" ${jobfile}
sed -i "s/COL/WhBlGrYeRe/g" ${jobfile}
sed -i "s/MAX/300/g" ${jobfile}
sed -i "s/MIN/100/g" ${jobfile}
sed -i "s/DEL/20/g" ${jobfile}
sed -i "s/VAR/mixLyrDpth_mm_uo/g" ${jobfile}
sed -i "s/VSHORT/mixed/g" ${jobfile}
sed -i "s/VLONG/Mixed Layer Depth/g" ${jobfile}
sed -i "s/DOPLOT/${doplot}/g" ${jobfile}
ncl ${jobfile}
\rm ${jobfile}
fi


if [ ${plot_uv} -eq 1 ] ; then
for lev in 0 11 15 ; do
jobfile="ncl.${exp}.clim_uv.ncl"
\cp ncl.SKEL.clim_uv.ncl ${jobfile}
sed -i "s/EXP/${exp}/g" ${jobfile}
sed -i "s/EXR/${exr}/g" ${jobfile}
sed -i "s/DOPLOT/${doplot}/g" ${jobfile}
sed -i "s/LEV/${lev}/g" ${jobfile}
ncl ${jobfile}
\rm ${jobfile}
done
fi


exit
